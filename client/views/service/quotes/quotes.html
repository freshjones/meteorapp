<template name="quotebuild">
	
	<div class="col-lg-1 bdr-right">
		{{> serviceNav}}
	</div>
	
	<div class="col-lg-11">
	
		<div class="btn-group">
			<button type="button" class="btn btn-default back"><i class="glyphicon glyphicon-circle-arrow-left"></i> Back</button>
			
		</div>
		<div class="btn-group">
			<button type="button" class="btn btn-default archive"><i class="fa fa-download"></i> Archive</button>
		</div>
		
		<div class="">
			<hr/>
		</div>
		
		<div class="row">
			
			<div class="col-md-12">
				<p class="lead">Project Quotation<br/><small class="text-muted"><em>{{quoteItem.company}}</em></small></p>
			</div>
		
			<div class="col-md-12">
			
				<div class="row">
				
					<div class="col-md-12 multistep-nav">
						
						<ul class="nav nav-tabs">
							<li class="active"><a href=#" data-action="overview" class="step">Overview</a></li>
							<li><a href=#" data-action="scope" class="step">Scope</a></li>
							<li><a href=#" data-action="assumptions" class="step">Assumptions</a></li>
							<li><a href=#" data-action="features" class="step">Features</a></li>
						</ul>
						
					</div>
					
					<div class="col-md-12 bdr-right">
						
						{{#if step}}
						
							<form id="buildquoteform">
							{{#if scopeStep}}
								{{> scopeStep}}
							{{/if}}
							
							{{#if assumptionsStep}}
								{{> assumptionsStep}}
							{{/if}}
							</form>
							
							{{#if featuresStep}}
								{{> featuresStep}}
							{{/if}}
							
						{{else}}
							<form id="buildquoteform">
								{{> quoteMain}}
							</form>
						{{/if}}
						
					</div>
				
					
				
				</div>
			
			</div>
		
		</div>
	
	</div>

</template>


<template name="quoteMain">
	
	<input type="hidden" name="step" id="ff-step" value="overview" />
	<div class="form-group">
		<label for="title" class="control-label">Project Title:</label>
		<div >
			<input id="ff-title" type="text" class="form-control" placeholder="John Doe" value="{{quoteItem.title}}" required>
		</div>
	</div>
	
	<div class="form-group">
	    <label for="Sent By" class="control-label">Project Overview:</label>
	    <div>
	      <textarea id="ff-description" class="form-control" placeholder="Notes" rows="5" required>{{quoteItem.description}}</textarea>
	    </div>
	</div>
	
	<div class="form-group">
	    <label for="Sent By" class="control-label">Project Purpose:</label>
	    <div>
	      <textarea id="ff-purpose" class="form-control" placeholder="Notes" rows="3" required>{{quoteItem.purpose}}</textarea>
	    </div>
	</div>
	
	<div class="form-group">
		<label for="title" class="control-label">Weight:</label>
		<div >
			<label class="radio-inline">
			  <input type="radio" id="weight1" name="weight" value="optimistic" {{isRadioChecked 'optimistic' quoteItem.weight}} required> Optimistic
			</label>
			<label class="radio-inline">
			  <input type="radio" id="weight2" name="weight" value="pessimistic" {{isRadioChecked 'pessimistic' quoteItem.weight}}> Pessimistic
			</label>
		</div>
	</div>
	
	<div class="form-group">
		<label for="title" class="control-label">Size:</label>
		<div >
			<label class="radio-inline">
			  <input type="radio" id="size1" name="size" value="large" {{isRadioChecked 'large' quoteItem.size}} required> Large
			</label>
			<label class="radio-inline">
			  <input type="radio" id="size2" name="size" value="medium" {{isRadioChecked 'medium' quoteItem.size}}> Medium
			</label>
			<label class="radio-inline">
			  <input type="radio" id="size3" name="size" value="small" {{isRadioChecked 'small' quoteItem.size}}> Small
			</label>
		</div>
	</div>
	
	<div class="form-group">
		<label for="title" class="control-label">Instinctive Estimate:</label>
		<div class="input-group">
			<span class="input-group-addon">Hours</span>
		  	<input id="ff-instinct" type="text" class="form-control" placeholder="Instinctive estimate of total hours" value="{{quoteItem.instinctEstimate}}" required>
		</div>
	</div>
	
	<div class="form-group">
		<div class="">
			<button type="submit" id="ff-submit" data-action="scope" class="btn btn-primary stepsave">Save &amp; Next <i class="fa fa-share"></i></button>
			<button type="button" class="btn btn-link cancel">Cancel</button>
	    </div>
	</div>
	 
</template>


<template name="scopeStep">
	
	<input type="hidden" name="step" id="ff-step" value="scope" />
	
	<div class="row ">
		<div class="col-md-12">
		
			<div class="row">
				<div class="col-md-6">
					<div class="form-group">
					    <label for="Sent By" class="control-label">What is included:</label>
					    <div>
					      <textarea id="ff-included" class="form-control" name="ff-included" placeholder="List each on one line" rows="10" required>{{quoteItem.scope.included}}</textarea>
					    </div>
					</div>
				</div>
				
				<div class="col-md-6">
					<div class="form-group">
					    <label for="Sent By" class="control-label">What is Not included:</label>
					    <div>
					      <textarea id="ff-notincluded" class="form-control" name="ff-notincluded"  placeholder="List each on one line" rows="10" required>{{quoteItem.scope.notincluded}}</textarea>
					    </div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="form-group">
		<div class="">
			<button type="submit" id="ff-submit" data-action="assumptions" class="btn btn-primary stepsave">Save &amp; Next <i class="fa fa-share"></i></button>
			<button type="button" class="btn btn-link cancel">Cancel</button>
	    </div>
	</div>
	
</template>

<template name="assumptionsStep">

	<input type="hidden" name="step" id="ff-step" value="assumptions" />
	
	<div class="form-group">
	    <label for="Sent By" class="control-label">Assumptions:</label>
	    <div>
	      <textarea id="ff-assumptions" class="form-control" placeholder="List each on one line" rows="10" required>{{quoteItem.assumptions}}</textarea>
	    </div>
	</div>
					
	<div class="form-group">
		<div class="">
			<button type="submit" id="ff-submit" data-action="features" class="btn btn-primary stepsave">Save &amp; Next <i class="fa fa-share"></i></button>
			<button type="button" class="btn btn-link cancel">Cancel</button>
	    </div>
	</div>

</template>

<template name="featureTopList">
	<div id="{{feature_id}}" class="feature-item sortable-item clearfix">
		<div class="clearfix {{featureClass}} feature-data">
			<div class="col-xs-6 title"><span class="move"><i class="fa fa-arrows sortFeatures"></i></span> {{title}}</div>
		 	<div class="pull-right">
			 	<div class="feature-col-1 text-right type hidden">{{type}}</div>
			 	<div class="feature-col-1 text-right strategy hidden">{{estimateData.strategy}}</div>
			 	<div class="feature-col-1 text-right design hidden">{{estimateData.design}}</div>
			 	<div class="feature-col-1 text-right build hidden">{{estimateData.build}}</div>
			 	<div class="feature-col-1 text-right estimate">{{{showFeatureField estimate 'estimate'}}}</div>
			 	<div class="feature-col-1 text-right experience">{{{showFeatureField experience 'experience'}}}</div>
			 	<div class="feature-col-1 text-right"><i class="fa fa-comment-o showEstValues pointer" data-content="Strategy: {{estimateData.strategy}}<br/>Design: {{estimateData.design}}<br/>Build: {{estimateData.build}}"></i>&nbsp;&nbsp;<i class="fa fa-times removeFeature"></i></div>
			</div>
		</div>
		{{> featureChildList}}
 	</div>
</template>

<template name="featureChildList">
		{{#if children}}
			<div class="sortable-items ui-sortable">
			{{#each children}}
				{{> featureTopList}}
			{{/each}}
			</div>
		{{else}}
			{{{allowFeatureNest}}}
		{{/if}}
</template>

<template name="featuresStep">


			
	<div class="row">
		
		<div class="col-md-8 bdr-left">
			
			<div id="saveFeatureTemplate">
				
				<div>
					<div class="template-form">
						<p class="lead">Save Template</p>
						<form name="feature-template-save" id="feature-template-save">
							<div class="form-group">
								<label for="title" class="sr-only">Name:</label>
								<div>
									<input id="fts-name" type="text" class="form-control" placeholder="Template Name" value="">
								</div>
							</div>	
							<div class="form-group">
								<div class="">
									<button type="submit" id="fts-submit" class="btn btn-primary">Save</button>
									<button type="button" class="btn btn-link fts-cancel">Cancel</button>
							    </div>
							</div>
							
						</form>
					</div>
				</div>
				
			</div>
			
			<div id="loadFeatureTemplates">
				
				<div>
					<div class="template-form">
						<p class="lead">Load Template</p>
						<form name="feature-template-save" id="feature-template-load">
							<div class="form-group">
								<label for="title" class="sr-only">Name:</label>
								<div>
									<select id="loadTemplateOption">
										{{#each quotetemplates}}
											<option value="{{_id}}">{{title}}</option>
										{{/each}}
									</select>
								</div>
							</div>	
							<div class="form-group">
								<div class="">
									<button type="submit" id="ftl-submit" class="btn btn-primary">Save</button>
									<button type="button" class="btn btn-link ftl-cancel">Cancel</button>
							    </div>
							</div>
							
						</form>
					</div>
				</div>
				
			</div>
			
			
			<input type="hidden" name="step" id="ff-step" value="features" />
			
			<div class="clearfix">
				<div class="pull-left"><p class="lead">Features</p></div>
				<div class="pull-right"><p class="lead"><i class="fa fa-sign-in pointer feature-load"></i>&nbsp;&nbsp;<i class="fa fa-paperclip pointer feature-save"></i></p></div>
			</div>
			
			<div class="clearfix">
				<div id="featureTop" class="sortable-items ui-sortable">
					{{#each quoteItem.features}}
						{{> featureTopList}}
					{{/each}}
				</div>
			</div>

			<form class="row form-inline vertical-padding" id="buildquoteform">
				<div class="form-group col-lg-6">
				    <label class="sr-only" for="exampleInputEmail2">Email address</label>
				    <input id="ff-featureTitle" type="text" class="form-control col-lg-6" placeholder="Feature Name" value="" required>
				</div>

				<div class="form-group col-lg-2">
				    <label class="sr-only" for="exampleInputEmail2">Email address</label>
				    <select name="ff-featureEstimate" id="ff-featureEstimate" class="form-control" required>
			    		<option value="0">Hours</option>
			    		<option value=".1">0.1 hours</option>
			    		<option value=".3">0.3 hours</option>
			    		<option value=".5">0.5 hours</option>
			    		<option value="1">1.0 hours</option>
			    		<option value="3">3.0 hours</option>
			    		<option value="5">5.0 hours</option>
			    		<option value="10">10 hours</option>
			    		<option value="30">30 hours</option>
			    		<option value="50">50 hours</option>
			    	</select>
				 </div>

				<div class="form-group col-lg-2">
				    <label class="sr-only" for="exampleInputEmail2">Email address</label>
				    <select name="ff-featureExperience" id="ff-featureExperience" class="form-control" required>
			    		<option value="0">DOE</option>
			    		<option value="5">5</option>
			    		<option value="4">4</option>
			    		<option value="3">3</option>
			    		<option value="2">2</option>
			    		<option value="1">1</option>
			    	</select>
				 </div>

				<div class="btn-group col-lg-2">
					<button type="button" data-type="feature" class="btn btn-default addFeature">Add</button>
					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
					 	<span class="caret"></span>
					    <span class="sr-only">Toggle Dropdown</span>
					</button>
					<ul class="dropdown-menu" role="menu">
						<li><a href="#" data-type="feature" class="addFeature">Add Feature</a></li>
						<li class="divider"></li>
						<li><a href="#" data-type="major" class="addFeature">Add Major Set</a></li>
						<li><a href="#" data-type="minor" class="addFeature">Add Minor Set</a></li>
					</ul>
				</div>

			</form>

		</div>
		
		<div class="col-md-4 bdr-left">
			
			<div class="clearfix">
				<div class="pull-left"><p class="lead">Summary</p></div>
				<div class="pull-right"><p class="lead">{{moneyFormat quoteItem.estTotal}}</p></div>
			</div>
			
			<form id="quoteSummary">
			
			<table class="table table-condensed">
			
			<tr>
				<td colspan="2" class="td-label">Use Instinct Estimate</td>
				<td class="text-right ">
					<div class="btn-group">
					  <button type="button" id="toggleEstModel-ON" data-action="on" class="btn {{whichEstBtn 'instinct'}} toggleEstModel">On</button>
					  <button type="button" id="toggleEstModel-OFF" data-action="off" class="btn {{whichEstBtn 'features'}} toggleEstModel">Off</button>
					</div>

				</td>
			</tr>
			
			
			<tr>
				<td colspan="2" class="td-label">Estimated Hours</td>
				<td class="text-center ">
					<div class="input-group">
						<input class="form-control" name="ff-subtotal" value="{{estvalue}}" />
						<span class="input-group-addon">Hrs</span>
					</div>
				</td>
			</tr>
			
			<tr>
				<td><input id="includeEnv" type="checkbox" class="quoteExtraToggle" name="includeEnv" {{isBooleanChecked quoteItem.extra.includeEnv}} /></td>
				<td class="td-label">Environment </td>
				<td class="text-center">
					<select class="form-control input-sm quoteExtraVal" id="valueEnv">
						{{#select quoteItem.extra.valueEnv}}
							<option value="5">5%</option>
							<option value="10">10%</option>
							<option value="15">15%</option>
							<option value="20">20%</option>
							<option value="25">25%</option>
						{{/select}}
					</select>
				</td>
			</tr>
			
			<tr>
				<td><input id="includeConcept" type="checkbox" class="quoteExtraToggle" name="includeConcept" {{isBooleanChecked quoteItem.extra.includeConcept}} /></td>
				<td class="td-label">Concept</td>
				<td class="text-center">
					<select class="form-control input-sm quoteExtraVal" id="valueConcept" >
						{{#select quoteItem.extra.valueConcept}}
							<option value="5">5%</option>
							<option value="10">10%</option>
							<option value="15">15%</option>
							<option value="20">20%</option>
							<option value="25">25%</option>
						{{/select}}
					</select>
				</td>
			</tr>
			
			<tr>
				<td><input id="includePM" type="checkbox" class="quoteExtraToggle" name="includePM" {{isBooleanChecked quoteItem.extra.includePM}} /></td>
				<td class="td-label">Project Management</td>
				<td class="text-center">
					<select class="form-control input-sm quoteExtraVal" id="valuePM">
						{{#select quoteItem.extra.valuePM}}
							<option value="5">5%</option>
							<option value="10">10%</option>
							<option value="15">15%</option>
							<option value="20">20%</option>
							<option value="25">25%</option>
						{{/select}}
					</select>
				</td>
			</tr>
			
			<tr>
				<td><input id="includeConfig" type="checkbox" class="quoteExtraToggle" name="includeConfig" {{isBooleanChecked quoteItem.extra.includeConfig}} /></td>
				<td class="td-label">Configuration</td>
				<td class="text-center">
					<select class="form-control input-sm quoteExtraVal" id="valueConfig" >
						{{#select quoteItem.extra.valueConfig}}
							<option value="5">5%</option>
							<option value="10">10%</option>
							<option value="15">15%</option>
							<option value="20">20%</option>
							<option value="25">25%</option>
						{{/select}}
					</select>
				</td>
			</tr>
			
			<tr>
				<td><input id="includeTesting" type="checkbox" class="quoteExtraToggle" name="includeTesting" {{isBooleanChecked quoteItem.extra.includeTesting}} /></td>
				<td class="td-label">Testing & Quality</td>
				<td class="text-center">
					<select class="form-control input-sm quoteExtraVal" id="valueTesting" >
						{{#select quoteItem.extra.valueTesting}}
							<option value="5">5%</option>
							<option value="10">10%</option>
							<option value="15">15%</option>
							<option value="20">20%</option>
							<option value="25">25%</option>
						{{/select}}
					</select>
				</td>
			</tr>
			
			<tr>
				<td><input id="includeDeploy" type="checkbox" class="quoteExtraToggle" name="includeDeploy" {{isBooleanChecked quoteItem.extra.includeDeploy}} /></td>
				<td class="td-label">Deployment</td>
				<td class="text-center">
					<select class="form-control input-sm quoteExtraVal" id="valueDeploy" >
						{{#select quoteItem.extra.valueDeploy}}
							<option value="5">5%</option>
							<option value="10">10%</option>
							<option value="15">15%</option>
							<option value="20">20%</option>
							<option value="25">25%</option>
						{{/select}}
					</select>
				</td>
			</tr>
			
			<tr>
				<td><input id="includeTraining" type="checkbox" class="quoteExtraToggle" name="includeTraining" {{isBooleanChecked quoteItem.extra.includeTraining}} /></td>
				<td class="td-label">Training</td>
				<td class="text-center">
					<select class="form-control input-sm quoteExtraVal" id="valueTraining">
						{{#select quoteItem.extra.valueTraining}}
							<option value="5">5%</option>
							<option value="10">10%</option>
							<option value="15">15%</option>
							<option value="20">20%</option>
							<option value="25">25%</option>
						{{/select}}
					</select>
				</td>
			</tr>
			
			
			<tr>
				<td><input id="includeUnForeseen" type="checkbox" class="quoteExtraToggle" name="includeUnForeseen" {{isBooleanChecked quoteItem.extra.includeUnForeseen}} /></td>
				<td class="td-label">Unforeseen Problems</td>
				<td class="text-center">
					<select class="form-control input-sm quoteExtraVal" id="valueUnForeseen" >
						{{#select quoteItem.extra.valueUnForeseen}}
							<option value="5">5%</option>
							<option value="10">10%</option>
							<option value="15">15%</option>
							<option value="20">20%</option>
							<option value="25">25%</option>
						{{/select}}
					</select>
				</td>
			</tr>
			
			
			</table>
			
			<div class="form-group">
				<div class="">
					<button type="submit" id="ff-savequote" data-action="complete" class="btn btn-success">Save Quote</button>
					<button type="button" class="btn btn-link cancel">Cancel</button>
			    </div>
			</div>
			
			</form>
			
		</div>
	</div>
	
	
</template>
